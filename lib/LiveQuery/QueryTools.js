"use strict";

var equalObjects = require('./equalObjects');

var Id = require('./Id');

var Parse = require('parse/node');
/**
 * Query Hashes are deterministic hashes for Parse Queries.
 * Any two queries that have the same set of constraints will produce the same
 * hash. This lets us reliably group components by the queries they depend upon,
 * and quickly determine if a query has changed.
 */

/**
 * Convert $or queries into an array of where conditions
 */


function flattenOrQueries(where) {
  if (!Object.prototype.hasOwnProperty.call(where, '$or')) {
    return where;
  }

  var accum = [];

  for (var i = 0; i < where.$or.length; i++) {
    accum = accum.concat(where.$or[i]);
  }

  return accum;
}
/**
 * Deterministically turns an object into a string. Disregards ordering
 */


function stringify(object) {
  if (typeof object !== 'object' || object === null) {
    if (typeof object === 'string') {
      return '"' + object.replace(/\|/g, '%|') + '"';
    }

    return object + '';
  }

  if (Array.isArray(object)) {
    var copy = object.map(stringify);
    copy.sort();
    return '[' + copy.join(',') + ']';
  }

  var sections = [];
  var keys = Object.keys(object);
  keys.sort();

  for (var k = 0; k < keys.length; k++) {
    sections.push(stringify(keys[k]) + ':' + stringify(object[keys[k]]));
  }

  return '{' + sections.join(',') + '}';
}
/**
 * Generate a hash from a query, with unique fields for columns, values, order,
 * skip, and limit.
 */


function queryHash(query) {
  if (query instanceof Parse.Query) {
    query = {
      className: query.className,
      where: query._where
    };
  }

  var where = flattenOrQueries(query.where || {});
  var columns = [];
  var values = [];
  var i;

  if (Array.isArray(where)) {
    var uniqueColumns = {};

    for (i = 0; i < where.length; i++) {
      var subValues = {};
      var keys = Object.keys(where[i]);
      keys.sort();

      for (var j = 0; j < keys.length; j++) {
        subValues[keys[j]] = where[i][keys[j]];
        uniqueColumns[keys[j]] = true;
      }

      values.push(subValues);
    }

    columns = Object.keys(uniqueColumns);
    columns.sort();
  } else {
    columns = Object.keys(where);
    columns.sort();

    for (i = 0; i < columns.length; i++) {
      values.push(where[columns[i]]);
    }
  }

  var sections = [columns.join(','), stringify(values)];
  return query.className + ':' + sections.join('|');
}
/**
 * contains -- Determines if an object is contained in a list with special handling for Parse pointers.
 */


function contains(haystack, needle) {
  if (needle && needle.__type && needle.__type === 'Pointer') {
    for (const i in haystack) {
      const ptr = haystack[i];

      if (typeof ptr === 'string' && ptr === needle.objectId) {
        return true;
      }

      if (ptr.className === needle.className && ptr.objectId === needle.objectId) {
        return true;
      }
    }

    return false;
  }

  return haystack.indexOf(needle) > -1;
}
/**
 * matchesQuery -- Determines if an object would be returned by a Parse Query
 * It's a lightweight, where-clause only implementation of a full query engine.
 * Since we find queries that match objects, rather than objects that match
 * queries, we can avoid building a full-blown query tool.
 */


function matchesQuery(object, query) {
  if (query instanceof Parse.Query) {
    var className = object.id instanceof Id ? object.id.className : object.className;

    if (className !== query.className) {
      return false;
    }

    return matchesQuery(object, query._where);
  }

  for (var field in query) {
    if (!matchesKeyConstraints(object, field, query[field])) {
      return false;
    }
  }

  return true;
}

function equalObjectsGeneric(obj, compareTo, eqlFn) {
  if (Array.isArray(obj)) {
    for (var i = 0; i < obj.length; i++) {
      if (eqlFn(obj[i], compareTo)) {
        return true;
      }
    }

    return false;
  }

  return eqlFn(obj, compareTo);
}
/**
 * Determines whether an object matches a single key's constraints
 */


function matchesKeyConstraints(object, key, constraints) {
  if (constraints === null) {
    return false;
  }

  if (key.indexOf('.') >= 0) {
    // Key references a subobject
    var keyComponents = key.split('.');
    var subObjectKey = keyComponents[0];
    var keyRemainder = keyComponents.slice(1).join('.');
    return matchesKeyConstraints(object[subObjectKey] || {}, keyRemainder, constraints);
  }

  var i;

  if (key === '$or') {
    for (i = 0; i < constraints.length; i++) {
      if (matchesQuery(object, constraints[i])) {
        return true;
      }
    }

    return false;
  }

  if (key === '$and') {
    for (i = 0; i < constraints.length; i++) {
      if (!matchesQuery(object, constraints[i])) {
        return false;
      }
    }

    return true;
  }

  if (key === '$nor') {
    for (i = 0; i < constraints.length; i++) {
      if (matchesQuery(object, constraints[i])) {
        return false;
      }
    }

    return true;
  }

  if (key === '$relatedTo') {
    // Bail! We can't handle relational queries locally
    return false;
  } // Decode Date JSON value


  if (object[key] && object[key].__type == 'Date') {
    object[key] = new Date(object[key].iso);
  } // Equality (or Array contains) cases


  if (typeof constraints !== 'object') {
    if (Array.isArray(object[key])) {
      return object[key].indexOf(constraints) > -1;
    }

    return object[key] === constraints;
  }

  var compareTo;

  if (constraints.__type) {
    if (constraints.__type === 'Pointer') {
      return equalObjectsGeneric(object[key], constraints, function (obj, ptr) {
        return typeof obj !== 'undefined' && ptr.className === obj.className && ptr.objectId === obj.objectId;
      });
    }

    return equalObjectsGeneric(object[key], Parse._decode(key, constraints), equalObjects);
  } // More complex cases


  for (var condition in constraints) {
    compareTo = constraints[condition];

    if (compareTo.__type) {
      compareTo = Parse._decode(key, compareTo);
    }

    switch (condition) {
      case '$lt':
        if (object[key] >= compareTo) {
          return false;
        }

        break;

      case '$lte':
        if (object[key] > compareTo) {
          return false;
        }

        break;

      case '$gt':
        if (object[key] <= compareTo) {
          return false;
        }

        break;

      case '$gte':
        if (object[key] < compareTo) {
          return false;
        }

        break;

      case '$ne':
        if (equalObjects(object[key], compareTo)) {
          return false;
        }

        break;

      case '$in':
        if (!contains(compareTo, object[key])) {
          return false;
        }

        break;

      case '$nin':
        if (contains(compareTo, object[key])) {
          return false;
        }

        break;

      case '$all':
        if (!object[key]) {
          return false;
        }

        for (i = 0; i < compareTo.length; i++) {
          if (object[key].indexOf(compareTo[i]) < 0) {
            return false;
          }
        }

        break;

      case '$exists':
        {
          const propertyExists = typeof object[key] !== 'undefined';
          const existenceIsRequired = constraints['$exists'];

          if (typeof constraints['$exists'] !== 'boolean') {
            // The SDK will never submit a non-boolean for $exists, but if someone
            // tries to submit a non-boolean for $exits outside the SDKs, just ignore it.
            break;
          }

          if (!propertyExists && existenceIsRequired || propertyExists && !existenceIsRequired) {
            return false;
          }

          break;
        }

      case '$regex':
        if (typeof compareTo === 'object') {
          return compareTo.test(object[key]);
        } // JS doesn't support perl-style escaping


        var expString = '';
        var escapeEnd = -2;
        var escapeStart = compareTo.indexOf('\\Q');

        while (escapeStart > -1) {
          // Add the unescaped portion
          expString += compareTo.substring(escapeEnd + 2, escapeStart);
          escapeEnd = compareTo.indexOf('\\E', escapeStart);

          if (escapeEnd > -1) {
            expString += compareTo.substring(escapeStart + 2, escapeEnd).replace(/\\\\\\\\E/g, '\\E').replace(/\W/g, '\\$&');
          }

          escapeStart = compareTo.indexOf('\\Q', escapeEnd);
        }

        expString += compareTo.substring(Math.max(escapeStart, escapeEnd + 2));
        var exp = new RegExp(expString, constraints.$options || '');

        if (!exp.test(object[key])) {
          return false;
        }

        break;

      case '$nearSphere':
        if (!compareTo || !object[key]) {
          return false;
        }

        var distance = compareTo.radiansTo(object[key]);
        var max = constraints.$maxDistance || Infinity;
        return distance <= max;

      case '$within':
        if (!compareTo || !object[key]) {
          return false;
        }

        var southWest = compareTo.$box[0];
        var northEast = compareTo.$box[1];

        if (southWest.latitude > northEast.latitude || southWest.longitude > northEast.longitude) {
          // Invalid box, crosses the date line
          return false;
        }

        return object[key].latitude > southWest.latitude && object[key].latitude < northEast.latitude && object[key].longitude > southWest.longitude && object[key].longitude < northEast.longitude;

      case '$containedBy':
        {
          for (const value of object[key]) {
            if (!contains(compareTo, value)) {
              return false;
            }
          }

          return true;
        }

      case '$geoWithin':
        {
          const points = compareTo.$polygon.map(geoPoint => [geoPoint.latitude, geoPoint.longitude]);
          const polygon = new Parse.Polygon(points);
          return polygon.containsPoint(object[key]);
        }

      case '$geoIntersects':
        {
          const polygon = new Parse.Polygon(object[key].coordinates);
          const point = new Parse.GeoPoint(compareTo.$point);
          return polygon.containsPoint(point);
        }

      case '$options':
        // Not a query type, but a way to add options to $regex. Ignore and
        // avoid the default
        break;

      case '$maxDistance':
        // Not a query type, but a way to add a cap to $nearSphere. Ignore and
        // avoid the default
        break;

      case '$select':
        return false;

      case '$dontSelect':
        return false;

      default:
        return false;
    }
  }

  return true;
}

var QueryTools = {
  queryHash: queryHash,
  matchesQuery: matchesQuery
};
module.exports = QueryTools;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlcXVhbE9iamVjdHMiLCJyZXF1aXJlIiwiSWQiLCJQYXJzZSIsImZsYXR0ZW5PclF1ZXJpZXMiLCJ3aGVyZSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImFjY3VtIiwiaSIsIiRvciIsImxlbmd0aCIsImNvbmNhdCIsInN0cmluZ2lmeSIsIm9iamVjdCIsInJlcGxhY2UiLCJBcnJheSIsImlzQXJyYXkiLCJjb3B5IiwibWFwIiwic29ydCIsImpvaW4iLCJzZWN0aW9ucyIsImtleXMiLCJrIiwicHVzaCIsInF1ZXJ5SGFzaCIsInF1ZXJ5IiwiUXVlcnkiLCJjbGFzc05hbWUiLCJfd2hlcmUiLCJjb2x1bW5zIiwidmFsdWVzIiwidW5pcXVlQ29sdW1ucyIsInN1YlZhbHVlcyIsImoiLCJjb250YWlucyIsImhheXN0YWNrIiwibmVlZGxlIiwiX190eXBlIiwicHRyIiwib2JqZWN0SWQiLCJpbmRleE9mIiwibWF0Y2hlc1F1ZXJ5IiwiaWQiLCJmaWVsZCIsIm1hdGNoZXNLZXlDb25zdHJhaW50cyIsImVxdWFsT2JqZWN0c0dlbmVyaWMiLCJvYmoiLCJjb21wYXJlVG8iLCJlcWxGbiIsImtleSIsImNvbnN0cmFpbnRzIiwia2V5Q29tcG9uZW50cyIsInNwbGl0Iiwic3ViT2JqZWN0S2V5Iiwia2V5UmVtYWluZGVyIiwic2xpY2UiLCJEYXRlIiwiaXNvIiwiX2RlY29kZSIsImNvbmRpdGlvbiIsInByb3BlcnR5RXhpc3RzIiwiZXhpc3RlbmNlSXNSZXF1aXJlZCIsInRlc3QiLCJleHBTdHJpbmciLCJlc2NhcGVFbmQiLCJlc2NhcGVTdGFydCIsInN1YnN0cmluZyIsIk1hdGgiLCJtYXgiLCJleHAiLCJSZWdFeHAiLCIkb3B0aW9ucyIsImRpc3RhbmNlIiwicmFkaWFuc1RvIiwiJG1heERpc3RhbmNlIiwiSW5maW5pdHkiLCJzb3V0aFdlc3QiLCIkYm94Iiwibm9ydGhFYXN0IiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJ2YWx1ZSIsInBvaW50cyIsIiRwb2x5Z29uIiwiZ2VvUG9pbnQiLCJwb2x5Z29uIiwiUG9seWdvbiIsImNvbnRhaW5zUG9pbnQiLCJjb29yZGluYXRlcyIsInBvaW50IiwiR2VvUG9pbnQiLCIkcG9pbnQiLCJRdWVyeVRvb2xzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9MaXZlUXVlcnkvUXVlcnlUb29scy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZXF1YWxPYmplY3RzID0gcmVxdWlyZSgnLi9lcXVhbE9iamVjdHMnKTtcbnZhciBJZCA9IHJlcXVpcmUoJy4vSWQnKTtcbnZhciBQYXJzZSA9IHJlcXVpcmUoJ3BhcnNlL25vZGUnKTtcblxuLyoqXG4gKiBRdWVyeSBIYXNoZXMgYXJlIGRldGVybWluaXN0aWMgaGFzaGVzIGZvciBQYXJzZSBRdWVyaWVzLlxuICogQW55IHR3byBxdWVyaWVzIHRoYXQgaGF2ZSB0aGUgc2FtZSBzZXQgb2YgY29uc3RyYWludHMgd2lsbCBwcm9kdWNlIHRoZSBzYW1lXG4gKiBoYXNoLiBUaGlzIGxldHMgdXMgcmVsaWFibHkgZ3JvdXAgY29tcG9uZW50cyBieSB0aGUgcXVlcmllcyB0aGV5IGRlcGVuZCB1cG9uLFxuICogYW5kIHF1aWNrbHkgZGV0ZXJtaW5lIGlmIGEgcXVlcnkgaGFzIGNoYW5nZWQuXG4gKi9cblxuLyoqXG4gKiBDb252ZXJ0ICRvciBxdWVyaWVzIGludG8gYW4gYXJyYXkgb2Ygd2hlcmUgY29uZGl0aW9uc1xuICovXG5mdW5jdGlvbiBmbGF0dGVuT3JRdWVyaWVzKHdoZXJlKSB7XG4gIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHdoZXJlLCAnJG9yJykpIHtcbiAgICByZXR1cm4gd2hlcmU7XG4gIH1cbiAgdmFyIGFjY3VtID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgd2hlcmUuJG9yLmxlbmd0aDsgaSsrKSB7XG4gICAgYWNjdW0gPSBhY2N1bS5jb25jYXQod2hlcmUuJG9yW2ldKTtcbiAgfVxuICByZXR1cm4gYWNjdW07XG59XG5cbi8qKlxuICogRGV0ZXJtaW5pc3RpY2FsbHkgdHVybnMgYW4gb2JqZWN0IGludG8gYSBzdHJpbmcuIERpc3JlZ2FyZHMgb3JkZXJpbmdcbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5KG9iamVjdCk6IHN0cmluZyB7XG4gIGlmICh0eXBlb2Ygb2JqZWN0ICE9PSAnb2JqZWN0JyB8fCBvYmplY3QgPT09IG51bGwpIHtcbiAgICBpZiAodHlwZW9mIG9iamVjdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiAnXCInICsgb2JqZWN0LnJlcGxhY2UoL1xcfC9nLCAnJXwnKSArICdcIic7XG4gICAgfVxuICAgIHJldHVybiBvYmplY3QgKyAnJztcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShvYmplY3QpKSB7XG4gICAgdmFyIGNvcHkgPSBvYmplY3QubWFwKHN0cmluZ2lmeSk7XG4gICAgY29weS5zb3J0KCk7XG4gICAgcmV0dXJuICdbJyArIGNvcHkuam9pbignLCcpICsgJ10nO1xuICB9XG4gIHZhciBzZWN0aW9ucyA9IFtdO1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG4gIGtleXMuc29ydCgpO1xuICBmb3IgKHZhciBrID0gMDsgayA8IGtleXMubGVuZ3RoOyBrKyspIHtcbiAgICBzZWN0aW9ucy5wdXNoKHN0cmluZ2lmeShrZXlzW2tdKSArICc6JyArIHN0cmluZ2lmeShvYmplY3Rba2V5c1trXV0pKTtcbiAgfVxuICByZXR1cm4gJ3snICsgc2VjdGlvbnMuam9pbignLCcpICsgJ30nO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEgaGFzaCBmcm9tIGEgcXVlcnksIHdpdGggdW5pcXVlIGZpZWxkcyBmb3IgY29sdW1ucywgdmFsdWVzLCBvcmRlcixcbiAqIHNraXAsIGFuZCBsaW1pdC5cbiAqL1xuZnVuY3Rpb24gcXVlcnlIYXNoKHF1ZXJ5KSB7XG4gIGlmIChxdWVyeSBpbnN0YW5jZW9mIFBhcnNlLlF1ZXJ5KSB7XG4gICAgcXVlcnkgPSB7XG4gICAgICBjbGFzc05hbWU6IHF1ZXJ5LmNsYXNzTmFtZSxcbiAgICAgIHdoZXJlOiBxdWVyeS5fd2hlcmUsXG4gICAgfTtcbiAgfVxuICB2YXIgd2hlcmUgPSBmbGF0dGVuT3JRdWVyaWVzKHF1ZXJ5LndoZXJlIHx8IHt9KTtcbiAgdmFyIGNvbHVtbnMgPSBbXTtcbiAgdmFyIHZhbHVlcyA9IFtdO1xuICB2YXIgaTtcbiAgaWYgKEFycmF5LmlzQXJyYXkod2hlcmUpKSB7XG4gICAgdmFyIHVuaXF1ZUNvbHVtbnMgPSB7fTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgd2hlcmUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzdWJWYWx1ZXMgPSB7fTtcbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMod2hlcmVbaV0pO1xuICAgICAga2V5cy5zb3J0KCk7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGtleXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgc3ViVmFsdWVzW2tleXNbal1dID0gd2hlcmVbaV1ba2V5c1tqXV07XG4gICAgICAgIHVuaXF1ZUNvbHVtbnNba2V5c1tqXV0gPSB0cnVlO1xuICAgICAgfVxuICAgICAgdmFsdWVzLnB1c2goc3ViVmFsdWVzKTtcbiAgICB9XG4gICAgY29sdW1ucyA9IE9iamVjdC5rZXlzKHVuaXF1ZUNvbHVtbnMpO1xuICAgIGNvbHVtbnMuc29ydCgpO1xuICB9IGVsc2Uge1xuICAgIGNvbHVtbnMgPSBPYmplY3Qua2V5cyh3aGVyZSk7XG4gICAgY29sdW1ucy5zb3J0KCk7XG4gICAgZm9yIChpID0gMDsgaSA8IGNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbHVlcy5wdXNoKHdoZXJlW2NvbHVtbnNbaV1dKTtcbiAgICB9XG4gIH1cblxuICB2YXIgc2VjdGlvbnMgPSBbY29sdW1ucy5qb2luKCcsJyksIHN0cmluZ2lmeSh2YWx1ZXMpXTtcblxuICByZXR1cm4gcXVlcnkuY2xhc3NOYW1lICsgJzonICsgc2VjdGlvbnMuam9pbignfCcpO1xufVxuXG4vKipcbiAqIGNvbnRhaW5zIC0tIERldGVybWluZXMgaWYgYW4gb2JqZWN0IGlzIGNvbnRhaW5lZCBpbiBhIGxpc3Qgd2l0aCBzcGVjaWFsIGhhbmRsaW5nIGZvciBQYXJzZSBwb2ludGVycy5cbiAqL1xuZnVuY3Rpb24gY29udGFpbnMoaGF5c3RhY2s6IEFycmF5LCBuZWVkbGU6IGFueSk6IGJvb2xlYW4ge1xuICBpZiAobmVlZGxlICYmIG5lZWRsZS5fX3R5cGUgJiYgbmVlZGxlLl9fdHlwZSA9PT0gJ1BvaW50ZXInKSB7XG4gICAgZm9yIChjb25zdCBpIGluIGhheXN0YWNrKSB7XG4gICAgICBjb25zdCBwdHIgPSBoYXlzdGFja1tpXTtcbiAgICAgIGlmICh0eXBlb2YgcHRyID09PSAnc3RyaW5nJyAmJiBwdHIgPT09IG5lZWRsZS5vYmplY3RJZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChwdHIuY2xhc3NOYW1lID09PSBuZWVkbGUuY2xhc3NOYW1lICYmIHB0ci5vYmplY3RJZCA9PT0gbmVlZGxlLm9iamVjdElkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGhheXN0YWNrLmluZGV4T2YobmVlZGxlKSA+IC0xO1xufVxuLyoqXG4gKiBtYXRjaGVzUXVlcnkgLS0gRGV0ZXJtaW5lcyBpZiBhbiBvYmplY3Qgd291bGQgYmUgcmV0dXJuZWQgYnkgYSBQYXJzZSBRdWVyeVxuICogSXQncyBhIGxpZ2h0d2VpZ2h0LCB3aGVyZS1jbGF1c2Ugb25seSBpbXBsZW1lbnRhdGlvbiBvZiBhIGZ1bGwgcXVlcnkgZW5naW5lLlxuICogU2luY2Ugd2UgZmluZCBxdWVyaWVzIHRoYXQgbWF0Y2ggb2JqZWN0cywgcmF0aGVyIHRoYW4gb2JqZWN0cyB0aGF0IG1hdGNoXG4gKiBxdWVyaWVzLCB3ZSBjYW4gYXZvaWQgYnVpbGRpbmcgYSBmdWxsLWJsb3duIHF1ZXJ5IHRvb2wuXG4gKi9cbmZ1bmN0aW9uIG1hdGNoZXNRdWVyeShvYmplY3Q6IGFueSwgcXVlcnk6IGFueSk6IGJvb2xlYW4ge1xuICBpZiAocXVlcnkgaW5zdGFuY2VvZiBQYXJzZS5RdWVyeSkge1xuICAgIHZhciBjbGFzc05hbWUgPSBvYmplY3QuaWQgaW5zdGFuY2VvZiBJZCA/IG9iamVjdC5pZC5jbGFzc05hbWUgOiBvYmplY3QuY2xhc3NOYW1lO1xuICAgIGlmIChjbGFzc05hbWUgIT09IHF1ZXJ5LmNsYXNzTmFtZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gbWF0Y2hlc1F1ZXJ5KG9iamVjdCwgcXVlcnkuX3doZXJlKTtcbiAgfVxuICBmb3IgKHZhciBmaWVsZCBpbiBxdWVyeSkge1xuICAgIGlmICghbWF0Y2hlc0tleUNvbnN0cmFpbnRzKG9iamVjdCwgZmllbGQsIHF1ZXJ5W2ZpZWxkXSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGVxdWFsT2JqZWN0c0dlbmVyaWMob2JqLCBjb21wYXJlVG8sIGVxbEZuKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGVxbEZuKG9ialtpXSwgY29tcGFyZVRvKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGVxbEZuKG9iaiwgY29tcGFyZVRvKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gb2JqZWN0IG1hdGNoZXMgYSBzaW5nbGUga2V5J3MgY29uc3RyYWludHNcbiAqL1xuZnVuY3Rpb24gbWF0Y2hlc0tleUNvbnN0cmFpbnRzKG9iamVjdCwga2V5LCBjb25zdHJhaW50cykge1xuICBpZiAoY29uc3RyYWludHMgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGtleS5pbmRleE9mKCcuJykgPj0gMCkge1xuICAgIC8vIEtleSByZWZlcmVuY2VzIGEgc3Vib2JqZWN0XG4gICAgdmFyIGtleUNvbXBvbmVudHMgPSBrZXkuc3BsaXQoJy4nKTtcbiAgICB2YXIgc3ViT2JqZWN0S2V5ID0ga2V5Q29tcG9uZW50c1swXTtcbiAgICB2YXIga2V5UmVtYWluZGVyID0ga2V5Q29tcG9uZW50cy5zbGljZSgxKS5qb2luKCcuJyk7XG4gICAgcmV0dXJuIG1hdGNoZXNLZXlDb25zdHJhaW50cyhvYmplY3Rbc3ViT2JqZWN0S2V5XSB8fCB7fSwga2V5UmVtYWluZGVyLCBjb25zdHJhaW50cyk7XG4gIH1cbiAgdmFyIGk7XG4gIGlmIChrZXkgPT09ICckb3InKSB7XG4gICAgZm9yIChpID0gMDsgaSA8IGNvbnN0cmFpbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAobWF0Y2hlc1F1ZXJ5KG9iamVjdCwgY29uc3RyYWludHNbaV0pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGtleSA9PT0gJyRhbmQnKSB7XG4gICAgZm9yIChpID0gMDsgaSA8IGNvbnN0cmFpbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIW1hdGNoZXNRdWVyeShvYmplY3QsIGNvbnN0cmFpbnRzW2ldKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChrZXkgPT09ICckbm9yJykge1xuICAgIGZvciAoaSA9IDA7IGkgPCBjb25zdHJhaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKG1hdGNoZXNRdWVyeShvYmplY3QsIGNvbnN0cmFpbnRzW2ldKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChrZXkgPT09ICckcmVsYXRlZFRvJykge1xuICAgIC8vIEJhaWwhIFdlIGNhbid0IGhhbmRsZSByZWxhdGlvbmFsIHF1ZXJpZXMgbG9jYWxseVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBEZWNvZGUgRGF0ZSBKU09OIHZhbHVlXG4gIGlmIChvYmplY3Rba2V5XSAmJiBvYmplY3Rba2V5XS5fX3R5cGUgPT0gJ0RhdGUnKSB7XG4gICAgb2JqZWN0W2tleV0gPSBuZXcgRGF0ZShvYmplY3Rba2V5XS5pc28pO1xuICB9XG4gIC8vIEVxdWFsaXR5IChvciBBcnJheSBjb250YWlucykgY2FzZXNcbiAgaWYgKHR5cGVvZiBjb25zdHJhaW50cyAhPT0gJ29iamVjdCcpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmplY3Rba2V5XSkpIHtcbiAgICAgIHJldHVybiBvYmplY3Rba2V5XS5pbmRleE9mKGNvbnN0cmFpbnRzKSA+IC0xO1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0W2tleV0gPT09IGNvbnN0cmFpbnRzO1xuICB9XG4gIHZhciBjb21wYXJlVG87XG4gIGlmIChjb25zdHJhaW50cy5fX3R5cGUpIHtcbiAgICBpZiAoY29uc3RyYWludHMuX190eXBlID09PSAnUG9pbnRlcicpIHtcbiAgICAgIHJldHVybiBlcXVhbE9iamVjdHNHZW5lcmljKG9iamVjdFtrZXldLCBjb25zdHJhaW50cywgZnVuY3Rpb24gKG9iaiwgcHRyKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgdHlwZW9mIG9iaiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBwdHIuY2xhc3NOYW1lID09PSBvYmouY2xhc3NOYW1lICYmXG4gICAgICAgICAgcHRyLm9iamVjdElkID09PSBvYmoub2JqZWN0SWRcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBlcXVhbE9iamVjdHNHZW5lcmljKG9iamVjdFtrZXldLCBQYXJzZS5fZGVjb2RlKGtleSwgY29uc3RyYWludHMpLCBlcXVhbE9iamVjdHMpO1xuICB9XG4gIC8vIE1vcmUgY29tcGxleCBjYXNlc1xuICBmb3IgKHZhciBjb25kaXRpb24gaW4gY29uc3RyYWludHMpIHtcbiAgICBjb21wYXJlVG8gPSBjb25zdHJhaW50c1tjb25kaXRpb25dO1xuICAgIGlmIChjb21wYXJlVG8uX190eXBlKSB7XG4gICAgICBjb21wYXJlVG8gPSBQYXJzZS5fZGVjb2RlKGtleSwgY29tcGFyZVRvKTtcbiAgICB9XG4gICAgc3dpdGNoIChjb25kaXRpb24pIHtcbiAgICAgIGNhc2UgJyRsdCc6XG4gICAgICAgIGlmIChvYmplY3Rba2V5XSA+PSBjb21wYXJlVG8pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICckbHRlJzpcbiAgICAgICAgaWYgKG9iamVjdFtrZXldID4gY29tcGFyZVRvKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnJGd0JzpcbiAgICAgICAgaWYgKG9iamVjdFtrZXldIDw9IGNvbXBhcmVUbykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJyRndGUnOlxuICAgICAgICBpZiAob2JqZWN0W2tleV0gPCBjb21wYXJlVG8pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICckbmUnOlxuICAgICAgICBpZiAoZXF1YWxPYmplY3RzKG9iamVjdFtrZXldLCBjb21wYXJlVG8pKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnJGluJzpcbiAgICAgICAgaWYgKCFjb250YWlucyhjb21wYXJlVG8sIG9iamVjdFtrZXldKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJyRuaW4nOlxuICAgICAgICBpZiAoY29udGFpbnMoY29tcGFyZVRvLCBvYmplY3Rba2V5XSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICckYWxsJzpcbiAgICAgICAgaWYgKCFvYmplY3Rba2V5XSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY29tcGFyZVRvLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKG9iamVjdFtrZXldLmluZGV4T2YoY29tcGFyZVRvW2ldKSA8IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICckZXhpc3RzJzoge1xuICAgICAgICBjb25zdCBwcm9wZXJ0eUV4aXN0cyA9IHR5cGVvZiBvYmplY3Rba2V5XSAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICAgIGNvbnN0IGV4aXN0ZW5jZUlzUmVxdWlyZWQgPSBjb25zdHJhaW50c1snJGV4aXN0cyddO1xuICAgICAgICBpZiAodHlwZW9mIGNvbnN0cmFpbnRzWyckZXhpc3RzJ10gIT09ICdib29sZWFuJykge1xuICAgICAgICAgIC8vIFRoZSBTREsgd2lsbCBuZXZlciBzdWJtaXQgYSBub24tYm9vbGVhbiBmb3IgJGV4aXN0cywgYnV0IGlmIHNvbWVvbmVcbiAgICAgICAgICAvLyB0cmllcyB0byBzdWJtaXQgYSBub24tYm9vbGVhbiBmb3IgJGV4aXRzIG91dHNpZGUgdGhlIFNES3MsIGp1c3QgaWdub3JlIGl0LlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoIXByb3BlcnR5RXhpc3RzICYmIGV4aXN0ZW5jZUlzUmVxdWlyZWQpIHx8IChwcm9wZXJ0eUV4aXN0cyAmJiAhZXhpc3RlbmNlSXNSZXF1aXJlZCkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICckcmVnZXgnOlxuICAgICAgICBpZiAodHlwZW9mIGNvbXBhcmVUbyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICByZXR1cm4gY29tcGFyZVRvLnRlc3Qob2JqZWN0W2tleV0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIEpTIGRvZXNuJ3Qgc3VwcG9ydCBwZXJsLXN0eWxlIGVzY2FwaW5nXG4gICAgICAgIHZhciBleHBTdHJpbmcgPSAnJztcbiAgICAgICAgdmFyIGVzY2FwZUVuZCA9IC0yO1xuICAgICAgICB2YXIgZXNjYXBlU3RhcnQgPSBjb21wYXJlVG8uaW5kZXhPZignXFxcXFEnKTtcbiAgICAgICAgd2hpbGUgKGVzY2FwZVN0YXJ0ID4gLTEpIHtcbiAgICAgICAgICAvLyBBZGQgdGhlIHVuZXNjYXBlZCBwb3J0aW9uXG4gICAgICAgICAgZXhwU3RyaW5nICs9IGNvbXBhcmVUby5zdWJzdHJpbmcoZXNjYXBlRW5kICsgMiwgZXNjYXBlU3RhcnQpO1xuICAgICAgICAgIGVzY2FwZUVuZCA9IGNvbXBhcmVUby5pbmRleE9mKCdcXFxcRScsIGVzY2FwZVN0YXJ0KTtcbiAgICAgICAgICBpZiAoZXNjYXBlRW5kID4gLTEpIHtcbiAgICAgICAgICAgIGV4cFN0cmluZyArPSBjb21wYXJlVG9cbiAgICAgICAgICAgICAgLnN1YnN0cmluZyhlc2NhcGVTdGFydCArIDIsIGVzY2FwZUVuZClcbiAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcXFxcXFxcXFxcXFxFL2csICdcXFxcRScpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFcvZywgJ1xcXFwkJicpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGVzY2FwZVN0YXJ0ID0gY29tcGFyZVRvLmluZGV4T2YoJ1xcXFxRJywgZXNjYXBlRW5kKTtcbiAgICAgICAgfVxuICAgICAgICBleHBTdHJpbmcgKz0gY29tcGFyZVRvLnN1YnN0cmluZyhNYXRoLm1heChlc2NhcGVTdGFydCwgZXNjYXBlRW5kICsgMikpO1xuICAgICAgICB2YXIgZXhwID0gbmV3IFJlZ0V4cChleHBTdHJpbmcsIGNvbnN0cmFpbnRzLiRvcHRpb25zIHx8ICcnKTtcbiAgICAgICAgaWYgKCFleHAudGVzdChvYmplY3Rba2V5XSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICckbmVhclNwaGVyZSc6XG4gICAgICAgIGlmICghY29tcGFyZVRvIHx8ICFvYmplY3Rba2V5XSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGlzdGFuY2UgPSBjb21wYXJlVG8ucmFkaWFuc1RvKG9iamVjdFtrZXldKTtcbiAgICAgICAgdmFyIG1heCA9IGNvbnN0cmFpbnRzLiRtYXhEaXN0YW5jZSB8fCBJbmZpbml0eTtcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlIDw9IG1heDtcbiAgICAgIGNhc2UgJyR3aXRoaW4nOlxuICAgICAgICBpZiAoIWNvbXBhcmVUbyB8fCAhb2JqZWN0W2tleV0pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNvdXRoV2VzdCA9IGNvbXBhcmVUby4kYm94WzBdO1xuICAgICAgICB2YXIgbm9ydGhFYXN0ID0gY29tcGFyZVRvLiRib3hbMV07XG4gICAgICAgIGlmIChzb3V0aFdlc3QubGF0aXR1ZGUgPiBub3J0aEVhc3QubGF0aXR1ZGUgfHwgc291dGhXZXN0LmxvbmdpdHVkZSA+IG5vcnRoRWFzdC5sb25naXR1ZGUpIHtcbiAgICAgICAgICAvLyBJbnZhbGlkIGJveCwgY3Jvc3NlcyB0aGUgZGF0ZSBsaW5lXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgb2JqZWN0W2tleV0ubGF0aXR1ZGUgPiBzb3V0aFdlc3QubGF0aXR1ZGUgJiZcbiAgICAgICAgICBvYmplY3Rba2V5XS5sYXRpdHVkZSA8IG5vcnRoRWFzdC5sYXRpdHVkZSAmJlxuICAgICAgICAgIG9iamVjdFtrZXldLmxvbmdpdHVkZSA+IHNvdXRoV2VzdC5sb25naXR1ZGUgJiZcbiAgICAgICAgICBvYmplY3Rba2V5XS5sb25naXR1ZGUgPCBub3J0aEVhc3QubG9uZ2l0dWRlXG4gICAgICAgICk7XG4gICAgICBjYXNlICckY29udGFpbmVkQnknOiB7XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2Ygb2JqZWN0W2tleV0pIHtcbiAgICAgICAgICBpZiAoIWNvbnRhaW5zKGNvbXBhcmVUbywgdmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgY2FzZSAnJGdlb1dpdGhpbic6IHtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gY29tcGFyZVRvLiRwb2x5Z29uLm1hcChnZW9Qb2ludCA9PiBbZ2VvUG9pbnQubGF0aXR1ZGUsIGdlb1BvaW50LmxvbmdpdHVkZV0pO1xuICAgICAgICBjb25zdCBwb2x5Z29uID0gbmV3IFBhcnNlLlBvbHlnb24ocG9pbnRzKTtcbiAgICAgICAgcmV0dXJuIHBvbHlnb24uY29udGFpbnNQb2ludChvYmplY3Rba2V5XSk7XG4gICAgICB9XG4gICAgICBjYXNlICckZ2VvSW50ZXJzZWN0cyc6IHtcbiAgICAgICAgY29uc3QgcG9seWdvbiA9IG5ldyBQYXJzZS5Qb2x5Z29uKG9iamVjdFtrZXldLmNvb3JkaW5hdGVzKTtcbiAgICAgICAgY29uc3QgcG9pbnQgPSBuZXcgUGFyc2UuR2VvUG9pbnQoY29tcGFyZVRvLiRwb2ludCk7XG4gICAgICAgIHJldHVybiBwb2x5Z29uLmNvbnRhaW5zUG9pbnQocG9pbnQpO1xuICAgICAgfVxuICAgICAgY2FzZSAnJG9wdGlvbnMnOlxuICAgICAgICAvLyBOb3QgYSBxdWVyeSB0eXBlLCBidXQgYSB3YXkgdG8gYWRkIG9wdGlvbnMgdG8gJHJlZ2V4LiBJZ25vcmUgYW5kXG4gICAgICAgIC8vIGF2b2lkIHRoZSBkZWZhdWx0XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnJG1heERpc3RhbmNlJzpcbiAgICAgICAgLy8gTm90IGEgcXVlcnkgdHlwZSwgYnV0IGEgd2F5IHRvIGFkZCBhIGNhcCB0byAkbmVhclNwaGVyZS4gSWdub3JlIGFuZFxuICAgICAgICAvLyBhdm9pZCB0aGUgZGVmYXVsdFxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJyRzZWxlY3QnOlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICBjYXNlICckZG9udFNlbGVjdCc6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbnZhciBRdWVyeVRvb2xzID0ge1xuICBxdWVyeUhhc2g6IHF1ZXJ5SGFzaCxcbiAgbWF0Y2hlc1F1ZXJ5OiBtYXRjaGVzUXVlcnksXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFF1ZXJ5VG9vbHM7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSUEsWUFBWSxHQUFHQyxPQUFPLENBQUMsZ0JBQUQsQ0FBMUI7O0FBQ0EsSUFBSUMsRUFBRSxHQUFHRCxPQUFPLENBQUMsTUFBRCxDQUFoQjs7QUFDQSxJQUFJRSxLQUFLLEdBQUdGLE9BQU8sQ0FBQyxZQUFELENBQW5CO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBQ0EsU0FBU0csZ0JBQVQsQ0FBMEJDLEtBQTFCLEVBQWlDO0VBQy9CLElBQUksQ0FBQ0MsTUFBTSxDQUFDQyxTQUFQLENBQWlCQyxjQUFqQixDQUFnQ0MsSUFBaEMsQ0FBcUNKLEtBQXJDLEVBQTRDLEtBQTVDLENBQUws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